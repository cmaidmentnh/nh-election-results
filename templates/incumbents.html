{% extends "base.html" %}

{% block title %}Incumbent Tracker - NH Election Results{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Incumbent Tracker</h1>
    <p class="subtitle">Candidates who have run in multiple elections</p>
</div>

<div class="metrics">
    <div class="metric">
        <div class="metric-value">{{ data.total_repeat }}</div>
        <div class="metric-label">Repeat Candidates</div>
    </div>
    <div class="metric">
        <div class="metric-value">{{ data.incumbents_won_2024 }}</div>
        <div class="metric-label">Incumbents Won 2024</div>
    </div>
    <div class="metric">
        <div class="metric-value">{{ data.incumbents_lost_2024 }}</div>
        <div class="metric-label">Incumbents Lost 2024</div>
    </div>
</div>

<div class="two-col">
    <div class="main-content">
        <div class="section">
            <h2>Most Experienced Candidates</h2>
            <p class="text-muted mb-2">Candidates who have run in the most elections (2016-2024)</p>

            <table>
                <thead>
                    <tr>
                        <th>Candidate</th>
                        <th>Party</th>
                        <th class="text-right">Races</th>
                        <th class="text-right">Wins</th>
                        <th class="text-right">Win Rate</th>
                        <th>Years</th>
                    </tr>
                </thead>
                <tbody>
                    {% for c in data.repeat_candidates %}
                    <tr>
                        <td>
                            <a href="{{ url_for('candidates') }}?q={{ c.name }}">{{ c.name }}</a>
                        </td>
                        <td>
                            <span class="{% if c.party == 'Republican' %}r{% elif c.party == 'Democratic' %}d{% endif %}">
                                {{ c.party[:1] if c.party else '-' }}
                            </span>
                        </td>
                        <td class="text-right">{{ c.total_races }}</td>
                        <td class="text-right">{{ c.wins }}</td>
                        <td class="text-right">{{ c.win_rate }}%</td>
                        <td class="text-muted">{{ c.years|join(', ') }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <aside class="sidebar">
        <div class="sidebar-section">
            <h3>About This Data</h3>
            <p class="text-muted">This tracks candidates for State Representative, State Senator, Executive Councilor, and Governor who have appeared on general election ballots multiple times since 2016.</p>
        </div>

        <div class="sidebar-section">
            <h3>Note</h3>
            <p class="text-muted">Some candidates may appear with slight name variations across years. This analysis uses exact name matching.</p>
        </div>
    </aside>
</div>
{% endblock %}
